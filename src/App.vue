<template>
  <v-app>
    <v-toolbar dense color="blue darken-4" dark elevation=5>
      <v-tabs grow dense v-model="ativa">
        <v-tab>
          <v-icon class="pr-3">mdi-calculator</v-icon>
          Cálculo de Peça
        </v-tab>
        <v-tab>
          <v-badge class="center" :content="quant_produtos"
            :value="quant_produtos" color="red" overlap>
          </v-badge>
          <v-icon class="px-3">mdi-cart-variant</v-icon>
          Lista de Produtos
        </v-tab>
        <v-tab>
          <v-badge class="center" :content="quant_orcamentos"
            :value="quant_orcamentos" color="red" overlap>
          </v-badge>
          <v-icon class="px-3">mdi-currency-brl</v-icon>
          Orçamentos
        </v-tab>
        <v-tab-item>
          <CalculoPeca/>
        </v-tab-item>
        <v-tab-item>
          <TabelaProdutos />
        </v-tab-item>
        <v-tab-item>
          <TabelaOrcamentos />
        </v-tab-item>
      </v-tabs>
    </v-toolbar>
  </v-app>
</template>

<script>
import eventbus from '@/eventbus'
import CalculoPeca from '@/components/calculo_peca/CalculoPeca'
import TabelaProdutos from '@/components/lista_produtos/TabelaProdutos'
import TabelaOrcamentos from '@/components/orcamentos/TabelaOrcamentos'
export default {
  name: 'App',
  components: {
    CalculoPeca, TabelaProdutos, TabelaOrcamentos
  },
  data: () => ({
    ativa: 1,
    quant_produtos: 0,
    quant_orcamentos: 0,
  }),
  created() {
    this.ativa = 1
    eventbus.$on('novoProduto', () => {
      this.quant_produtos++
    })
    eventbus.$on('removeProduto', () => {
      this.quant_produtos--
    })
    eventbus.$on('novoOrcamento', () => {
      this.quant_produtos = 0
      this.quant_orcamentos++
    })
    eventbus.$on('removeOrcamento', () => {
      this.quant_orcamentos--
    })
  },
  mounted() {
    this.ativa = 0
  }
};
</script>

<style>
  .v-toolbar {
    max-height: 50px;
  }
</style>